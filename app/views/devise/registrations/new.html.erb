<style type="text/css">
  label.error {
    display: block;
    background: transparent;
    border-color: transparent;
    box-shadow: 0px 0px 0px rgba(0, 0, 0, .9);
    padding: 2px 5px;
    color: red;
    margin-top: -20px;
}

</style>




  <div class="container-fluid">
  <div class="row">
   <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 img2">
    <div class="log">
<h2 style="text-align: center;">Sign up</h2>


<%= form_for(resource, as: resource_name, url: registration_path(resource_name),html: {:id => 'new_registration'}) do |f| %>
  <%= devise_error_messages! %>
  <% @role_id = params[:role_id]%>
  <%= hidden_field_tag :role_id, params[:role_id]   %>

  <div class="field">

    <%= f.label :email %><br />
    <%= f.email_field :email, autofocus: true, autocomplete: "email",:id => 'email_field',placeholder: "Enter email" %>


  </div>

  <div class="field">
    <%= f.label :password %>
    <% if @minimum_password_length %>
    <em>(<%= @minimum_password_length %> characters minimum)</em>

    <% end %><br />
    <%= f.password_field :password, autocomplete: "off" ,:id => 'password_field',placeholder: "Enter password"%>
  </div>

  <div class="field">
    <%= f.label :password_confirmation %><br />
    <%= f.password_field :password_confirmation, autocomplete: "off" ,:required => true, :id => 'c_password_field', placeholder: "Confirm password"%>
  </div>

  <div class="field">
    <%= f.label :company_name %><br />
    <%= f.text_field :company_name, autocomplete: "off", :id => 'company_name_field',placeholder: "Company name" %>
  </div>

  <div class="field">
    <%= f.label :experience %><br />
    <%= f.text_field :experience, autocomplete: "off",:required => true, :id => 'experience_field',placeholder: "In years" %>

  </div>

<% if params[:role_id] == '1'%>

<% @start = StartupTechnology.new %>
<% @technology = Technology.all %>

  <%#= f.fields_for :startup_technologies, @start do |ft| %>

    <div class="field">

    <%= f.label :technology_ids %>
    
<%= f.collection_select :technology_ids, @technology,:id, :technology_name,{},{:multiple => true}%>

      </div>

<%#@users = User.last%>
<%#@index=@users.id + 1%>


<%#= f.hidden_field :user_id, :value => @index %>
  
  <%#end%>

<%end%>
  <%= f.hidden_field :role_id, :value => params[:role_id] %>
<%= f.hidden_field :approval_id, :value => '1' %>
<br>

  <div class="actions">
    <%= f.submit "Sign Up" %>
  </div>

<% end %>

<script type="text/javascript">
  
  $(document).ready(function(){

    jQuery('option').mousedown(function(e) {
    e.preventDefault();
    jQuery(this).toggleClass('selected');
  
    jQuery(this).prop('selected', !jQuery(this).prop('selected'));
    return false;
});



    
    $('#new_registration').validate({

      
    });
    $( "#email_field" ).rules( "add", {
    required: true,
  messages: {
    required: "Email is mandatory"
  }
  });
    $( "#password_field" ).rules( "add", {
  required: true,
  minlength: 6,
  messages: {
    required: "Password is required",
    minlength: jQuery.validator.format("Please, at least {0} characters are necessary")
  }
  });
    $.validator.addMethod('positiveNumber',
          function (value) {
              return Number(value) > 0;
          }, 'Enter a positive number.');
    $.validator.addMethod('limitNumber',
          function (value) {
              return Number(value) < 999;
          }, 'Enter a valid experience.');

    $("#c_password_field").rules("add",{
      required: true,
      equalTo: "#password_field",
      messages: {
        required: "enter your password",
        equalTo: "Confirm password doesn't match"
      }
    });

    $("#company_name_field").rules("add",{
      required: true,
      minlength: 2,
      messages: {
        required: "company name is mandatory",
        minlength: jQuery.validator.format("Please, at least {0} characters are necessary")
      }
    });

    $("#experience_field").rules("add",{
      required: true,
      number: true,
      positiveNumber:true,
      limitNumber:true,
      messages: {
        required: "enter 0 if no experience",
        number: "experience can only be integer"
        

      }
    });

    $("#user_technology_ids").rules("add",{
      required: true,
      messages: {
        required: "Select atleast one"
      }
    });


  });

</script>



<%= render "devise/shared/links" %>
<br>
</div></div></div></div>